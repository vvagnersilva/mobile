/**
 * @version $Id: slider.js 30 2015-11-04 11:15:22Z szymon $
 * @package DJ-ImageSlider
 * @subpackage DJ-ImageSlider Component
 * @copyright Copyright (C) 2012 DJ-Extensions.com, All rights reserved.
 * @license DJ-Extensions.com Proprietary Use License
 * @author url: http://dj-extensions.com
 * @author email contact@dj-extensions.com
 * @developer Szymon Woronowski - szymon.woronowski@design-joomla.eu
 *
 */
!function($){var F={init:function(m){m.data();var n=m.data('djslider');var o=m.data('animation');m.removeAttr('data-djslider');m.removeAttr('data-animation');var q=$('#djslider'+n.id).css('opacity',0);var r=$('#slider'+n.id).css('position','relative');var t=n.css3=='1'?support('transition'):false;var u=r.children('li');var w=n.slide_size;var x=n.visible_slides;var y=w*u.length;var z=u.length-x;var A=0;var B=o.auto=='1'?1:0;var C=0;var D=false;if(n.slider_type==2){u.css('position','absolute');u.css('top',0);u.css('left',0);r.css('width',w);u.css('opacity',0);u.css('visibility','hidden');$(u[0]).css('opacity',1);$(u[0]).css('visibility','visible');if(t)u.css(t,'opacity '+o.duration+'ms '+o.css3transition)}else if(n.slider_type==1){r.css('top',0);r.css('height',y);if(t)r.css(t,'top '+o.duration+'ms '+o.css3transition)}else{r.css(n.direction,0);r.css('width',y);if(t)r.css(t,n.direction+' '+o.duration+'ms '+o.css3transition)}if(n.show_arrows>0){$('#next'+n.id).on('click',function(){if(n.direction=='right')prevSlide();else nextSlide()}).on('keydown',function(a){var b=a.which;if(b==13||b==32){if(n.direction=='right')prevSlide();else nextSlide();a.preventDefault();a.stopPropagation()}});$('#prev'+n.id).on('click',function(){if(n.direction=='right')nextSlide();else prevSlide()}).on('keydown',function(a){var b=a.which;if(b==13||b==32){if(n.direction=='right')nextSlide();else prevSlide();a.preventDefault();a.stopPropagation()}})}if(n.show_buttons>0){$('#play'+n.id).on('click',function(){changeNavigation();B=1}).on('keydown',function(a){var b=a.which;if(b==13||b==32){changeNavigation();B=1;$('#pause'+n.id).focus();a.preventDefault();a.stopPropagation()}});$('#pause'+n.id).on('click',function(){changeNavigation();B=0}).on('keydown',function(a){var b=a.which;if(b==13||b==32){changeNavigation();B=0;$('#play'+n.id).focus();a.preventDefault();a.stopPropagation()}})}m.on('mouseenter',function(){C=1}).on('mouseleave',function(){m.removeClass('focused');C=0}).on('focus',function(){m.addClass('focused');m.trigger('mouseenter')}).on('keydown',function(e){var a=e.which;if(a==37||a==39){if(a==39){if(n.direction=='right')prevSlide();else nextSlide()}else{if(n.direction=='right')nextSlide();else prevSlide()}e.preventDefault();e.stopPropagation()}});$('.djslider-end').on('focus',function(){m.trigger('mouseleave')});m.djswipe(function(a,b){if(b.x<100||b.y>30){return}if(a.x=="left"){if(n.direction=='right')prevSlide();else nextSlide()}else if(a.x=="right"){if(n.direction=='right')nextSlide();else prevSlide()}});if($('#cust-navigation'+n.id).length){var E=$('#cust-navigation'+n.id).find('.load-button');E.each(function(c){var d=$(this);d.on('click',function(e){if(!D&&!d.hasClass('load-button-active')){loadSlide(c)}}).on('keydown',function(a){var b=a.which;if(b==13||b==32){if(!D&&!d.hasClass('load-button-active')){loadSlide(c)}a.preventDefault();a.stopPropagation()}});if(c>z)d.css('display','none')})}function getSize(a){var b={};if(a.is(':hidden')){var c=a.parent(),child,width;while(c.is(':hidden')){child=c;c=c.parent()}width=c.width();if(child){width-=parseInt(child.css('margin-left'));width-=parseInt(child.css('margin-right'));width-=parseInt(child.css('border-left-width'));width-=parseInt(child.css('border-right-width'));width-=parseInt(child.css('padding-left'));width-=parseInt(child.css('padding-right'))}var d=a.clone();d.css({'position':'absolute','visibility':'hidden','max-width':width});$(document.body).append(d);b={'x':d.width(),'y':d.height()};d.remove()}else{b={'x':a.width(),'y':a.height()}}return b}function responsive(){var c=m.parent();var d=getSize(c).x;var e=parseInt(q.css('max-width'));var f=getSize(q);var g=f.x;if(g>d){g=d}else if(g<=d&&(!e||g<e)){g=(d>e?e:d)}var h=f.x/f.y;var i=g/h;q.css('width',g);q.css('height',i);if(n.slider_type==2){r.css('width',g);u.css('width',g);u.css('height',i)}else if(n.slider_type==1){var j=parseInt($(u[0]).css('margin-bottom'));w=(i+j)/x;y=u.length*w+u.length;r.css('height',y);u.css('width',g);u.css('height',w-j);r.css('top',-w*A)}else{var j=n.direction=='right'?parseInt($(u[0]).css('margin-left')):parseInt($(u[0]).css('margin-right'));var k=Math.ceil(g/(n.slide_size+j));if(k!=x){x=(k>n.visible_slides?n.visible_slides:k);z=u.length-x;if($('#cust-navigation'+n.id).length){var l=$('#cust-navigation'+n.id).find('.load-button');l.each(function(a){var b=$(this);if(a>z)b.css('display','none');else b.css('display','')})}h=(x*w-j)/f.y;i=g/h;q.css('height',i)}w=(g+j)/x;y=u.length*w+u.length;r.css('width',y);u.css('width',w-j);u.css('height',i);r.css(n.direction,-w*A);if(A>z)loadSlide(z)}if(n.show_buttons>0||n.show_arrows>0){button_pos=$('#navigation'+n.id).position().top;if(button_pos<0){m.css('padding-top',-button_pos);m.css('padding-bottom',0)}else{buttons_height=0;if(n.show_arrows>0){buttons_height=getSize($('#next'+n.id)).y;buttons_height=Math.max(buttons_height,getSize($('#prev'+n.id)).y)}if(n.show_buttons>0){buttons_height=Math.max(buttons_height,getSize($('#play'+n.id)).y);buttons_height=Math.max(buttons_height,getSize($('#pause'+n.id)).y)}padding=button_pos+buttons_height-i;if(padding>0){m.css('padding-top',0);m.css('padding-bottom',padding)}else{m.css('padding-top',0);m.css('padding-bottom',0)}}buttons_margin=parseInt($('#navigation'+n.id).css('margin-left'))+parseInt($('#navigation'+n.id).css('margin-right'));if(buttons_margin<0&&getSize($(window)).x<getSize($('#navigation'+n.id)).x-buttons_margin){$('#navigation'+n.id).css('margin-left',0);$('#navigation'+n.id).css('margin-right',0)}}updateTabindex()}function updateActiveButton(c){if($('#cust-navigation'+n.id).length)E.each(function(a){var b=$(this);b.removeClass('load-button-active');if(a==c)b.addClass('load-button-active')})}function nextSlide(){if(A<z)loadSlide(A+1);else loadSlide(0)}function prevSlide(){if(A>0)loadSlide(A-1);else loadSlide(z)}function loadSlide(a){if(A==a)return;if(n.slider_type==2){if(D)return;D=true;prev_slide=A;A=a;makeFade(prev_slide)}else{A=a;if(n.slider_type==1){if(t){r.css('top',-w*A)}else{r.animate({top:-w*A},o.duration,o.transition)}}else{if(t){r.css(n.direction,-w*A)}else{if(n.direction=='right')r.animate({right:-w*A},o.duration,o.transition);else r.animate({left:-w*A},o.duration,o.transition)}}}updateTabindex();updateActiveButton(A)}function makeFade(a){$(u[A]).css('visibility','visible');if(t){$(u[A]).css('opacity',1);$(u[a]).css('opacity',0)}else{$(u[A]).animate({opacity:1},o.duration,o.transition);$(u[a]).animate({opacity:0},o.duration,o.transition)}setTimeout(function(){$(u[a]).css('visibility','hidden');D=false},o.duration)}function changeNavigation(){if(B){$('#pause'+n.id).css('display','none');$('#play'+n.id).css('display','block')}else{$('#play'+n.id).css('display','none');$('#pause'+n.id).css('display','block')}}function slidePlay(){setTimeout(function(){if(B&&!C)nextSlide();slidePlay()},o.delay)}function sliderLoaded(){m.css('background','none');q.css('opacity',1);responsive();if(n.show_buttons>0){play_width=getSize($('#play'+n.id)).x;$('#play'+n.id).css('margin-left',-play_width/2);pause_width=getSize($('#pause'+n.id)).x;$('#pause'+n.id).css('margin-left',-pause_width/2);if(B){$('#play'+n.id).css('display','none')}else{$('#pause'+n.id).css('display','none')}}slidePlay()}function support(p){var b=document.body||document.documentElement,s=b.style;if(typeof s=='undefined')return false;if(typeof s[p]=='string')return p;v=['Moz','Webkit','Khtml','O','ms','Icab'],pu=p.charAt(0).toUpperCase()+p.substr(1);for(var i=0;i<v.length;i++){if(typeof s[v[i]+pu]=='string')return('-'+v[i].toLowerCase()+'-'+p)}return false}function updateTabindex(){u.each(function(a){var b=$(this).find('a[href], input, select, textarea, button');if(a>=A&&a<A+parseInt(x)){b.each(function(){$(this).removeProp('tabindex')})}else{b.each(function(){$(this).prop('tabindex','-1')})}})}if(n.preload)setTimeout(sliderLoaded,n.preload);else $(window).load(sliderLoaded);$(window).on('resize',responsive)}};$.fn.djswipe=function(b){var c=false,originalPosition=null,info=null;$el=$(this);function swipeInfo(a){var x=a.originalEvent.touches[0].pageX,y=a.originalEvent.touches[0].pageY,dx,dy;dx=(x>originalPosition.x)?"right":"left";dy=(y>originalPosition.y)?"down":"up";return{direction:{x:dx,y:dy},offset:{x:Math.abs(x-originalPosition.x),y:Math.abs(originalPosition.y-y)}}}$el.on("touchstart",function(a){c=true;originalPosition={x:a.originalEvent.touches[0].pageX,y:a.originalEvent.touches[0].pageY}});$el.on("touchend",function(){c=false;if(info)b(info.direction,info.offset);originalPosition=null;info=null});$el.on("touchmove",function(a){if(!c){return}info=swipeInfo(a)});return true};$(document).ready(function(){$('[data-djslider]').each(function(){F.init($(this))})})}(jQuery);